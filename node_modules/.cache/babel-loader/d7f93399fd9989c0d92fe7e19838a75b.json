{"remainingRequest":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\funnelChart.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\funnelChart.vue","mtime":1676359297068},{"path":"E:\\2023spring\\sci\\vue3-bigData\\babel.config.js","mtime":1676359297052},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js","mtime":1676359413493},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1676359413934}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGVjaGFydHMgZnJvbSAiZWNoYXJ0cyI7CmltcG9ydCB7IG9uTW91bnRlZCwgb25CZWZvcmVVbm1vdW50LCByZWYsIHdhdGNoIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICJAL3V0aWxzL2luZGV4LmpzIjsKaW1wb3J0IHVzZVJlc2l6ZSBmcm9tICJAL2NvbXBvbmVudEFwaS91c2VSZXNpemUuanMiOwppbXBvcnQgeyBzZWxlY3RCb3hDaGFydERhdGEgfSBmcm9tICJAL2FwaS9tb2NrQ2hhcnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZ1bm5lbENoYXJ0IiwKICBzZXR1cCgpIHsKICAgIGxldCB7CiAgICAgIGFiY29kZSwKICAgICAgeWVhciwKICAgICAgcGFyZW50SW5mbywKICAgICAgcm91dGVyQ2hhbmdlCiAgICB9ID0gdXNlUmVzaXplKCk7CiAgICBjb25zdCBmdW5uZWxDaGFydCA9IHJlZihudWxsKTsKICAgIGxldCBteUNoYXJ0ID0gcmVmKG51bGwpOwogICAgY29uc3QgcmVzaXplSGFuZGxlciA9IGRlYm91bmNlKCgpID0+IHsKICAgICAgaWYgKG15Q2hhcnQpIHsKICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpOwogICAgICB9CiAgICB9LCAyMDApOwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgZ2V0Qm94RGF0YSgpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVzaXplSGFuZGxlcik7CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLCByZXNpemVIYW5kbGVyKTsKICAgIH0pOwoKICAgIC8vIC8v5qih5ouf5o6l5Y+j77yM6I635Y+WZWNoYXJ0c+aVsOaNrgogICAgY29uc3QgZ2V0Qm94RGF0YSA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IHNlbGVjdEJveENoYXJ0RGF0YSh7CiAgICAgICAgYWJjb2RlLAogICAgICAgIHllYXIKICAgICAgfSk7CiAgICAgIGluaXRFY2hhcnRzKGRhdGEpOwogICAgfTsKCiAgICAvL+a4suafk2VjaGFydHPlm74KICAgIGNvbnN0IGluaXRFY2hhcnRzID0gZGF0YSA9PiB7CiAgICAgIG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoZnVubmVsQ2hhcnQudmFsdWUpOwogICAgICBteUNoYXJ0LnNldE9wdGlvbih7CiAgICAgICAgY29sb3I6IFsiIzAxRTFGRiIsICIjRUQ2NUE5IiwgIiMxMUFBRkYiLCAiI0I5RkZGRiIsICIjMzA2NEYzIiwgIiNGRjkwNUEiXSwKICAgICAgICB0aXRsZTogewogICAgICAgICAgc2hvdzogZGF0YS5sZW5ndGggPT09IDAsCiAgICAgICAgICB0b3A6ICJjZW50ZXIiLAogICAgICAgICAgbGVmdDogImNlbnRlciIsCiAgICAgICAgICB0ZXh0OiAi5pqC5peg5pWw5o2uIiwKICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICBjb2xvcjogInJnYigxNzksIDIzOSwgMjU1KSIsCiAgICAgICAgICAgIGZvbnRTaXplOiAxMgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogIml0ZW0iLAogICAgICAgICAgZm9ybWF0dGVyOiAie2F9IDxici8+e2J9IDoge2N9IOS6uiIKICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIG5hbWU6ICLlrqLmiLflubTpvoQiLAogICAgICAgICAgdHlwZTogImZ1bm5lbCIsCiAgICAgICAgICBsZWZ0OiAiMTAlIiwKICAgICAgICAgIHRvcDogIjUlIiwKICAgICAgICAgIHdpZHRoOiAiNzAlIiwKICAgICAgICAgIGhlaWdodDogIjg1JSIsCiAgICAgICAgICBsYWJlbDogewogICAgICAgICAgICBub3JtYWw6IHsKICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICJ7Yn0iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgICAgcG9zaXRpb246ICJpbnNpZGUiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsYWJlbExpbmU6IHsKICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgbGVuZ3RoOiAxMCwKICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgIHdpZHRoOiAxLAogICAgICAgICAgICAgICAgdHlwZTogInNvbGlkIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICBub3JtYWw6IHsKICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZGF0YTogZGF0YQogICAgICAgIH1dCiAgICAgIH0sIHRydWUpOwogICAgICBteUNoYXJ0Lm9mZigiY2xpY2siKTsKICAgICAgbXlDaGFydC5vbigiY2xpY2siLCAoKSA9PiB7CiAgICAgICAgcm91dGVyQ2hhbmdlKCIvbW9yZSIpOwogICAgICB9KTsKICAgIH07CiAgICB3YXRjaCh5ZWFyLCAobmwsIG9sKSA9PiB7CiAgICAgIGdldEJveERhdGEoKTsKICAgIH0sIHsKICAgICAgbGF6eTogZmFsc2UKICAgIH0pOwogICAgd2F0Y2gocGFyZW50SW5mbywgKG5sLCBvbCkgPT4gewogICAgICBnZXRCb3hEYXRhKCk7CiAgICB9LCB7CiAgICAgIGxhenk6IGZhbHNlLAogICAgICBkZWVwOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGZ1bm5lbENoYXJ0CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":"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","names":["echarts","onMounted","onBeforeUnmount","ref","watch","debounce","useResize","selectBoxChartData","name","setup","abcode","year","parentInfo","routerChange","funnelChart","myChart","resizeHandler","resize","getBoxData","window","addEventListener","removeEventListener","data","initEcharts","init","value","setOption","color","title","show","length","top","left","text","textStyle","fontSize","tooltip","trigger","formatter","series","type","width","height","label","normal","emphasis","position","labelLine","lineStyle","itemStyle","borderWidth","off","on","nl","ol","lazy","deep"],"sourceRoot":"","sources":["E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\funnelChart.vue"],"sourcesContent":["<template>\r\n  <div class=\"chart-wrapper\" ref=\"funnelChart\"></div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from \"echarts\";\r\nimport { onMounted, onBeforeUnmount, ref, watch } from \"vue\";\r\nimport { debounce } from \"@/utils/index.js\";\r\nimport useResize from \"@/componentApi/useResize.js\";\r\nimport { selectBoxChartData } from \"@/api/mockChart\";\r\n\r\nexport default {\r\n  name: \"funnelChart\",\r\n  setup() {\r\n    let { abcode, year, parentInfo, routerChange } = useResize();\r\n\r\n    const funnelChart = ref(null);\r\n    let myChart = ref(null);\r\n\r\n    const resizeHandler = debounce(() => {\r\n      if (myChart) {\r\n        myChart.resize();\r\n      }\r\n    }, 200);\r\n\r\n    onMounted(() => {\r\n      getBoxData();\r\n      window.addEventListener(\"resize\", resizeHandler);\r\n    });\r\n    onBeforeUnmount(() => {\r\n      window.removeEventListener(\"resize\", resizeHandler);\r\n    });\r\n\r\n    // //模拟接口，获取echarts数据\r\n    const getBoxData = async () => {\r\n      const { data } = await selectBoxChartData({\r\n        abcode,\r\n        year,\r\n      });\r\n\r\n      initEcharts(data);\r\n    };\r\n\r\n    //渲染echarts图\r\n    const initEcharts = (data) => {\r\n      myChart = echarts.init(funnelChart.value);\r\n      myChart.setOption(\r\n        {\r\n          color: [\r\n            \"#01E1FF\",\r\n            \"#ED65A9\",\r\n            \"#11AAFF\",\r\n            \"#B9FFFF\",\r\n            \"#3064F3\",\r\n            \"#FF905A\",\r\n          ],\r\n          title: {\r\n            show: data.length === 0,\r\n            top: \"center\",\r\n            left: \"center\",\r\n            text: \"暂无数据\",\r\n            textStyle: {\r\n              color: \"rgb(179, 239, 255)\",\r\n              fontSize: 12,\r\n            },\r\n          },\r\n          tooltip: {\r\n            trigger: \"item\",\r\n            formatter: \"{a} <br/>{b} : {c} 人\",\r\n          },\r\n          series: [\r\n            {\r\n              name: \"客户年龄\",\r\n              type: \"funnel\",\r\n              left: \"10%\",\r\n              top: \"5%\",\r\n              width: \"70%\",\r\n              height: \"85%\",\r\n              label: {\r\n                normal: {\r\n                  formatter: \"{b}\",\r\n                },\r\n                emphasis: {\r\n                  position: \"inside\",\r\n                },\r\n              },\r\n              labelLine: {\r\n                normal: {\r\n                  length: 10,\r\n                  lineStyle: {\r\n                    width: 1,\r\n                    type: \"solid\",\r\n                  },\r\n                },\r\n              },\r\n              itemStyle: {\r\n                normal: {\r\n                  borderWidth: 0,\r\n                },\r\n              },\r\n              data: data,\r\n            },\r\n          ],\r\n        },\r\n        true\r\n      );\r\n\r\n      myChart.off(\"click\");\r\n      myChart.on(\"click\", () => {\r\n        routerChange(\"/more\");\r\n      });\r\n    };\r\n\r\n    watch(\r\n      year,\r\n      (nl, ol) => {\r\n        getBoxData();\r\n      },\r\n      { lazy: false }\r\n    );\r\n\r\n    watch(\r\n      parentInfo,\r\n      (nl, ol) => {\r\n        getBoxData();\r\n      },\r\n      { lazy: false, deep: true }\r\n    );\r\n\r\n    return {\r\n      funnelChart,\r\n    };\r\n  },\r\n};\r\n</script>\r\n"]}]}