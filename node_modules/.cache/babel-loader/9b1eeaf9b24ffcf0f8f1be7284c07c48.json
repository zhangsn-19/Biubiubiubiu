{"remainingRequest":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\wordChart.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\wordChart.vue","mtime":1676359297068},{"path":"E:\\2023spring\\sci\\vue3-bigData\\babel.config.js","mtime":1676359297052},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js","mtime":1676359413493},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1676359413934}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGVjaGFydHMgZnJvbSAiZWNoYXJ0cyI7CnJlcXVpcmUoImVjaGFydHMtd29yZGNsb3VkIik7CmltcG9ydCB7IG9uTW91bnRlZCwgb25CZWZvcmVVbm1vdW50LCByZWYsIHdhdGNoLCByb3V0ZXJDaGFuZ2UgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gIkAvdXRpbHMvaW5kZXguanMiOwppbXBvcnQgdXNlUmVzaXplIGZyb20gIkAvY29tcG9uZW50QXBpL3VzZVJlc2l6ZS5qcyI7CmltcG9ydCB7IHNlbGVjdFdvcmREYXRhIH0gZnJvbSAiQC9hcGkvbW9ja0NoYXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ3b3JkQ2hhcnQiLAogIHNldHVwKCkgewogICAgbGV0IHsKICAgICAgYWJjb2RlLAogICAgICB5ZWFyLAogICAgICBwYXJlbnRJbmZvLAogICAgICByb3V0ZXJDaGFuZ2UKICAgIH0gPSB1c2VSZXNpemUoKTsKICAgIGNvbnN0IHdvcmRDaGFydCA9IHJlZihudWxsKTsKICAgIGxldCBteUNoYXJ0ID0gcmVmKG51bGwpOwogICAgY29uc3QgcmVzaXplSGFuZGxlciA9IGRlYm91bmNlKCgpID0+IHsKICAgICAgaWYgKG15Q2hhcnQpIHsKICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpOwogICAgICB9CiAgICB9LCAyMDApOwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgZ2V0V29yZERhdGEoKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHJlc2l6ZUhhbmRsZXIpOwogICAgfSk7CiAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4gewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVzaXplSGFuZGxlcik7CiAgICB9KTsKCiAgICAvL+aooeaLn+aOpeWPo++8jOiOt+WPlmVjaGFydHPmlbDmja4KICAgIGNvbnN0IGdldFdvcmREYXRhID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgc2VsZWN0V29yZERhdGEoewogICAgICAgIGFiY29kZSwKICAgICAgICB5ZWFyCiAgICAgIH0pOwogICAgICBpbml0RWNoYXJ0cyhkYXRhKTsKICAgIH07CgogICAgLy8gLy/muLLmn5NlY2hhcnRz5Zu+CiAgICBjb25zdCBpbml0RWNoYXJ0cyA9IGRhdGEgPT4gewogICAgICBjb25zdCBjb2xvckxpc3QgPSBbIiMyOENBRDgiLCAiI0U1QTIxNCIsICIjMDFEMkQxIiwgIiNGNjlGNzMiLCAiIzM5RTU2OSJdOwogICAgICBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KHdvcmRDaGFydC52YWx1ZSk7CiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgc2hvdzogZGF0YS5sZW5ndGggPT09IDAsCiAgICAgICAgICB0b3A6ICJjZW50ZXIiLAogICAgICAgICAgbGVmdDogImNlbnRlciIsCiAgICAgICAgICB0ZXh0OiAi5pqC5peg5pWw5o2uIiwKICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICBjb2xvcjogInJnYigxNzksIDIzOSwgMjU1KSIsCiAgICAgICAgICAgIGZvbnRTaXplOiAxMgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogIml0ZW0iLAogICAgICAgICAgZm9ybWF0dGVyOiAi6ZSA6YePIDxici8+e2J9IDoge2N9IOS4hyIsCiAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgZm9udFNpemU6IDEyCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICBmZWF0dXJlOiB7CiAgICAgICAgICAgIGRhdGFWaWV3OiB7CiAgICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWFnaWNUeXBlOiB7CiAgICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzdG9yZTogewogICAgICAgICAgICAgIHNob3c6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNhdmVBc0ltYWdlOiB7CiAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgICBuYW1lOiB5ZWFyLnZhbHVlICsgIumUgOWUruWTgeeJjCIsCiAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogMgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgaWNvblN0eWxlOiB7CiAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAiIzE5OTBEQSIKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHRvcDogMCwKICAgICAgICAgIHJpZ2h0OiA1CiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICB0eXBlOiAid29yZENsb3VkIiwKICAgICAgICAgIHNpemVSYW5nZTogWzEyLCAyNl0sCiAgICAgICAgICByb3RhdGlvblJhbmdlOiBbMCwgMF0sCiAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgY29sb3I6IHBhcmFtcyA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JMaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9yTGlzdC5sZW5ndGgpXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgfV0KICAgICAgfSwgdHJ1ZSk7CiAgICAgIG15Q2hhcnQub2ZmKCJjbGljayIpOwogICAgICBteUNoYXJ0Lm9uKCJjbGljayIsICgpID0+IHsKICAgICAgICByb3V0ZXJDaGFuZ2UoIi9tb3JlIik7CiAgICAgIH0pOwogICAgfTsKICAgIHdhdGNoKHllYXIsIChubCwgb2wpID0+IHsKICAgICAgZ2V0V29yZERhdGEoKTsKICAgIH0sIHsKICAgICAgbGF6eTogZmFsc2UKICAgIH0pOwogICAgd2F0Y2gocGFyZW50SW5mbywgKG5sLCBvbCkgPT4gewogICAgICBnZXRXb3JkRGF0YSgpOwogICAgfSwgewogICAgICBsYXp5OiBmYWxzZSwKICAgICAgZGVlcDogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gewogICAgICB3b3JkQ2hhcnQKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["echarts","require","onMounted","onBeforeUnmount","ref","watch","routerChange","debounce","useResize","selectWordData","name","setup","abcode","year","parentInfo","wordChart","myChart","resizeHandler","resize","getWordData","window","addEventListener","removeEventListener","data","initEcharts","colorList","init","value","setOption","title","show","length","top","left","text","textStyle","color","fontSize","tooltip","trigger","formatter","toolbox","feature","dataView","magicType","restore","saveAsImage","pixelRatio","iconStyle","normal","borderColor","right","series","type","sizeRange","rotationRange","params","Math","floor","random","off","on","nl","ol","lazy","deep"],"sourceRoot":"","sources":["E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\wordChart.vue"],"sourcesContent":["<template>\r\n  <div class=\"chart-wrapper\" ref=\"wordChart\"></div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from \"echarts\";\r\nrequire(\"echarts-wordcloud\");\r\nimport { onMounted, onBeforeUnmount, ref, watch, routerChange } from \"vue\";\r\nimport { debounce } from \"@/utils/index.js\";\r\nimport useResize from \"@/componentApi/useResize.js\";\r\nimport { selectWordData } from \"@/api/mockChart\";\r\n\r\nexport default {\r\n  name: \"wordChart\",\r\n  setup() {\r\n    let { abcode, year, parentInfo, routerChange } = useResize();\r\n\r\n    const wordChart = ref(null);\r\n    let myChart = ref(null);\r\n\r\n    const resizeHandler = debounce(() => {\r\n      if (myChart) {\r\n        myChart.resize();\r\n      }\r\n    }, 200);\r\n\r\n    onMounted(() => {\r\n      getWordData();\r\n      window.addEventListener(\"resize\", resizeHandler);\r\n    });\r\n    onBeforeUnmount(() => {\r\n      window.removeEventListener(\"resize\", resizeHandler);\r\n    });\r\n\r\n    //模拟接口，获取echarts数据\r\n    const getWordData = async () => {\r\n      const { data } = await selectWordData({\r\n        abcode,\r\n        year,\r\n      });\r\n      initEcharts(data);\r\n    };\r\n\r\n    // //渲染echarts图\r\n    const initEcharts = (data) => {\r\n      const colorList = [\"#28CAD8\", \"#E5A214\", \"#01D2D1\", \"#F69F73\", \"#39E569\"];\r\n      myChart = echarts.init(wordChart.value);\r\n      myChart.setOption(\r\n        {\r\n          title: {\r\n            show: data.length === 0,\r\n            top: \"center\",\r\n            left: \"center\",\r\n            text: \"暂无数据\",\r\n            textStyle: {\r\n              color: \"rgb(179, 239, 255)\",\r\n              fontSize: 12,\r\n            },\r\n          },\r\n          tooltip: {\r\n            trigger: \"item\",\r\n            formatter: \"销量 <br/>{b} : {c} 万\",\r\n            textStyle: {\r\n              fontSize: 12,\r\n            },\r\n          },\r\n          toolbox: {\r\n            feature: {\r\n              dataView: {\r\n                show: false,\r\n              },\r\n              magicType: {\r\n                show: false,\r\n              },\r\n              restore: {\r\n                show: false,\r\n              },\r\n              saveAsImage: {\r\n                show: true,\r\n                name: year.value + \"销售品牌\",\r\n                pixelRatio: 2,\r\n              },\r\n            },\r\n            iconStyle: {\r\n              normal: {\r\n                borderColor: \"#1990DA\",\r\n              },\r\n            },\r\n            top: 0,\r\n            right: 5,\r\n          },\r\n          series: [\r\n            {\r\n              type: \"wordCloud\",\r\n              sizeRange: [12, 26],\r\n              rotationRange: [0, 0],\r\n              textStyle: {\r\n                normal: {\r\n                  color: (params) => {\r\n                    return colorList[\r\n                      Math.floor(Math.random() * colorList.length)\r\n                    ];\r\n                  },\r\n                },\r\n              },\r\n              data: data,\r\n            },\r\n          ],\r\n        },\r\n        true\r\n      );\r\n\r\n      myChart.off(\"click\");\r\n      myChart.on(\"click\", () => {\r\n        routerChange(\"/more\");\r\n      });\r\n    };\r\n\r\n    watch(\r\n      year,\r\n      (nl, ol) => {\r\n        getWordData();\r\n      },\r\n      { lazy: false }\r\n    );\r\n\r\n    watch(\r\n      parentInfo,\r\n      (nl, ol) => {\r\n        getWordData();\r\n      },\r\n      { lazy: false, deep: true }\r\n    );\r\n\r\n    return {\r\n      wordChart,\r\n    };\r\n  },\r\n};\r\n</script>\r\n"]}]}