{"remainingRequest":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\cityCount.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\cityCount.vue","mtime":1676359297068},{"path":"E:\\2023spring\\sci\\vue3-bigData\\babel.config.js","mtime":1676359297052},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\babel-loader\\lib\\index.js","mtime":1676359413493},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676359411943},{"path":"E:\\2023spring\\sci\\vue3-bigData\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1676359413934}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBlY2hhcnRzIGZyb20gImVjaGFydHMiOwppbXBvcnQgeyBvbk1vdW50ZWQsIG9uQmVmb3JlVW5tb3VudCwgcmVmLCB3YXRjaCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiQC91dGlscy9pbmRleC5qcyI7CmltcG9ydCB1c2VSZXNpemUgZnJvbSAiQC9jb21wb25lbnRBcGkvdXNlUmVzaXplLmpzIjsKaW1wb3J0IHsgc2VsZWN0Q2l0eURhdGEgfSBmcm9tICJAL2FwaS9jaGFydCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY2l0eUNvdW50IiwKICBzZXR1cCgpIHsKICAgIGxldCB7CiAgICAgIGFiY29kZSwKICAgICAgeWVhciwKICAgICAgcGFyZW50SW5mbywKICAgICAgcm91dGVyQ2hhbmdlCiAgICB9ID0gdXNlUmVzaXplKCk7CiAgICBjb25zdCBjaXR5Q291bnQgPSByZWYobnVsbCk7CiAgICBsZXQgbXlDaGFydCA9IHJlZihudWxsKTsKICAgIGNvbnN0IHJlc2l6ZUhhbmRsZXIgPSBkZWJvdW5jZSgoKSA9PiB7CiAgICAgIGlmIChteUNoYXJ0KSB7CiAgICAgICAgbXlDaGFydC5yZXNpemUoKTsKICAgICAgfQogICAgfSwgMjAwKTsKICAgIG9uTW91bnRlZCgoKSA9PiB7CiAgICAgIGdldENoYXJ0RGF0YSgpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVzaXplSGFuZGxlcik7CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLCByZXNpemVIYW5kbGVyKTsKICAgIH0pOwoKICAgIC8v5qih5ouf5o6l5Y+j77yM6I635Y+WZWNoYXJ0c+aVsOaNrgogICAgY29uc3QgZ2V0Q2hhcnREYXRhID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgc2VsZWN0Q2l0eURhdGEoewogICAgICAgIGFiY29kZSwKICAgICAgICB5ZWFyCiAgICAgIH0pOwogICAgICBsZXQgeERhdGEgPSBbXSwKICAgICAgICB5RGF0YSA9IFtdOwogICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgeERhdGEucHVzaChpdGVtLm5hbWUpOwogICAgICAgIHlEYXRhLnB1c2goaXRlbS52YWx1ZSk7CiAgICAgIH0pOwogICAgICBpbml0RWNoYXJ0cyh4RGF0YSwgeURhdGEpOwogICAgfTsKCiAgICAvL+a4suafk2VjaGFydHPlm74KICAgIGNvbnN0IGluaXRFY2hhcnRzID0gKHhEYXRhLCB5RGF0YSkgPT4gewogICAgICBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNpdHlDb3VudC52YWx1ZSk7CiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKHsKICAgICAgICBncmlkOiB7CiAgICAgICAgICBsZWZ0OiAiMTMlIiwKICAgICAgICAgIHJpZ2h0OiAiOCUiLAogICAgICAgICAgYm90dG9tOiAiMjUlIiwKICAgICAgICAgIHRvcDogIjEwJSIKICAgICAgICB9LAogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICBzaG93OiB4RGF0YS5sZW5ndGggPT09IDAsCiAgICAgICAgICB0b3A6ICJjZW50ZXIiLAogICAgICAgICAgbGVmdDogImNlbnRlciIsCiAgICAgICAgICB0ZXh0OiAi5pqC5peg5pWw5o2uIiwKICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICBjb2xvcjogInJnYigxNzksIDIzOSwgMjU1KSIsCiAgICAgICAgICAgIGZvbnRTaXplOiAxMgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogImF4aXMiLAogICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgdHlwZTogInNoYWRvdyIKICAgICAgICAgIH0sCiAgICAgICAgICBmb3JtYXR0ZXI6IHBhcmFtcyA9PiB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXNbMF0ubmFtZSArICI8YnI+6ZSA5ZSu6aKd5bqm77yaIiArIHBhcmFtc1swXS52YWx1ZSArICLkuIciOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdG9vbGJveDogewogICAgICAgICAgZmVhdHVyZTogewogICAgICAgICAgICBkYXRhVmlldzogewogICAgICAgICAgICAgIHNob3c6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1hZ2ljVHlwZTogewogICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgdHlwZTogWyJsaW5lIiwgImJhciJdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc3RvcmU6IHsKICAgICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzYXZlQXNJbWFnZTogewogICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgbmFtZTogeWVhci52YWx1ZSArICLlubTplIDllK7pop3mjpLlkI0iLAogICAgICAgICAgICAgIHBpeGVsUmF0aW86IDIKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGljb25TdHlsZTogewogICAgICAgICAgICBub3JtYWw6IHsKICAgICAgICAgICAgICBib3JkZXJDb2xvcjogIiMxOTkwREEiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICByaWdodDogNQogICAgICAgIH0sCiAgICAgICAgZGF0YVpvb206IFt7CiAgICAgICAgICB0eXBlOiAiaW5zaWRlIiwKICAgICAgICAgIHN0YXJ0VmFsdWU6IDAsCiAgICAgICAgICBlbmRWYWx1ZTogMTAKICAgICAgICB9XSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogImNhdGVnb3J5IiwKICAgICAgICAgIGF4aXNMaW5lOiB7CiAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiAiIzM5N2NiYyIKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHNwbGl0TGluZTogewogICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgfSwKICAgICAgICAgIGF4aXNUaWNrOiB7CiAgICAgICAgICAgIHNob3c6IGZhbHNlCiAgICAgICAgICB9LAogICAgICAgICAgLy/ovbTnur/kuIrnmoTlrZcKICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogIiNjZWNlY2UiLAogICAgICAgICAgICAgIGZvbnRTaXplOiAxMgogICAgICAgICAgICB9LAogICAgICAgICAgICByb3RhdGU6IDE1CiAgICAgICAgICB9LAogICAgICAgICAgZGF0YTogeERhdGEKICAgICAgICB9LAogICAgICAgIHlBeGlzOiBbewogICAgICAgICAgdHlwZTogInZhbHVlIiwKICAgICAgICAgIGF4aXNUaWNrOiB7CiAgICAgICAgICAgIHNob3c6IGZhbHNlCiAgICAgICAgICB9LAogICAgICAgICAgLy/ovbTnur/kuIrnmoTlrZcKICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTIsCiAgICAgICAgICAgICAgY29sb3I6ICIjY2VjZWNlIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgY29sb3I6ICIjMzk3Y2JjIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgLy/nvZHmoLznur8KICAgICAgICAgIHNwbGl0TGluZTogewogICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogIiMxMTM2NmUiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBuYW1lOiAi6ZSA5ZSu6aKd5bqmIiwKICAgICAgICAgIHR5cGU6ICJiYXIiLAogICAgICAgICAgZGF0YTogeURhdGEsCiAgICAgICAgICBiYXJXaWR0aDogIjQ1JSIsCiAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgY29sb3I6IG5ldyBlY2hhcnRzLmdyYXBoaWMuTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgMSwgW3sKICAgICAgICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgICAgICAgY29sb3I6ICIjMDFCREY0IgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgb2Zmc2V0OiAxLAogICAgICAgICAgICAgIGNvbG9yOiAiIzA4M0FGNiAiCiAgICAgICAgICAgIH1dLCBmYWxzZSkKICAgICAgICAgIH0KICAgICAgICB9XQogICAgICB9LCB0cnVlKTsKICAgICAgbXlDaGFydC5nZXRacigpLm9mZigiY2xpY2siKTsKICAgICAgbXlDaGFydC5nZXRacigpLm9uKCJjbGljayIsIHBhcmFtcyA9PiB7CiAgICAgICAgY29uc3QgcG9pbnRJblBpeGVsID0gW3BhcmFtcy5vZmZzZXRYLCBwYXJhbXMub2Zmc2V0WV07CiAgICAgICAgaWYgKG15Q2hhcnQuY29udGFpblBpeGVsKCJncmlkIiwgcG9pbnRJblBpeGVsKSB8fCB4RGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJvdXRlckNoYW5nZSgiL21vcmUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIHdhdGNoKHllYXIsIChubCwgb2wpID0+IHsKICAgICAgZ2V0Q2hhcnREYXRhKCk7CiAgICB9LCB7CiAgICAgIGxhenk6IGZhbHNlCiAgICB9KTsKICAgIHdhdGNoKHBhcmVudEluZm8sIChubCwgb2wpID0+IHsKICAgICAgZ2V0Q2hhcnREYXRhKCk7CiAgICB9LCB7CiAgICAgIGxhenk6IGZhbHNlLAogICAgICBkZWVwOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGNpdHlDb3VudAogICAgfTsKICB9Cn07"},{"version":3,"mappings":";AAKA,OAAOA,OAAM,MAAO,SAAS;AAC7B,SAASC,SAAS,EAAEC,eAAe,EAAEC,GAAG,EAAEC,KAAI,QAAS,KAAK;AAC5D,SAASC,QAAO,QAAS,kBAAkB;AAE3C,OAAOC,SAAQ,MAAO,6BAA6B;AACnD,SAASC,cAAa,QAAS,aAAa;AAE5C,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAK,GAAG;IACN,IAAI;MAAEC,MAAM;MAAEC,IAAI;MAAEC,UAAU;MAAEC;IAAa,IAAIP,SAAS,EAAE;IAE5D,MAAMQ,SAAQ,GAAIX,GAAG,CAAC,IAAI,CAAC;IAC3B,IAAIY,OAAM,GAAIZ,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMa,aAAY,GAAIX,QAAQ,CAAC,MAAM;MACnC,IAAIU,OAAO,EAAE;QACXA,OAAO,CAACE,MAAM,EAAE;MAClB;IACF,CAAC,EAAE,GAAG,CAAC;IAEPhB,SAAS,CAAC,MAAM;MACdiB,YAAY,EAAE;MACdC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEJ,aAAa,CAAC;IAClD,CAAC,CAAC;IACFd,eAAe,CAAC,MAAM;MACpBiB,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEL,aAAa,CAAC;IACrD,CAAC,CAAC;;IAEF;IACA,MAAME,YAAW,GAAI,YAAY;MAC/B,MAAM;QAAEI;MAAK,IAAI,MAAMf,cAAc,CAAC;QACpCG,MAAM;QACNC;MACF,CAAC,CAAC;MACF,IAAIY,KAAI,GAAI,EAAE;QACZC,KAAI,GAAI,EAAE;MACZF,IAAI,CAACG,OAAO,CAAEC,IAAI,IAAK;QACrBH,KAAK,CAACI,IAAI,CAACD,IAAI,CAAClB,IAAI,CAAC;QACrBgB,KAAK,CAACG,IAAI,CAACD,IAAI,CAACE,KAAK,CAAC;MACxB,CAAC,CAAC;MACFC,WAAW,CAACN,KAAK,EAAEC,KAAK,CAAC;IAC3B,CAAC;;IAED;IACA,MAAMK,WAAU,GAAI,CAACN,KAAK,EAAEC,KAAK,KAAK;MACpCT,OAAM,GAAIf,OAAO,CAAC8B,IAAI,CAAChB,SAAS,CAACc,KAAK,CAAC;MACvCb,OAAO,CAACgB,SAAS,CACf;QACEC,IAAI,EAAE;UACJC,IAAI,EAAE,KAAK;UACXC,KAAK,EAAE,IAAI;UACXC,MAAM,EAAE,KAAK;UACbC,GAAG,EAAE;QACP,CAAC;QACDC,KAAK,EAAE;UACLC,IAAI,EAAEf,KAAK,CAACgB,MAAK,KAAM,CAAC;UACxBH,GAAG,EAAE,QAAQ;UACbH,IAAI,EAAE,QAAQ;UACdO,IAAI,EAAE,MAAM;UACZC,SAAS,EAAE;YACTC,KAAK,EAAE,oBAAoB;YAC3BC,QAAQ,EAAE;UACZ;QACF,CAAC;QACDC,OAAO,EAAE;UACPC,OAAO,EAAE,MAAM;UACfC,WAAW,EAAE;YACXC,IAAI,EAAE;UACR,CAAC;UACDC,SAAS,EAAGC,MAAM,IAAK;YACrB,OAAOA,MAAM,CAAC,CAAC,CAAC,CAACzC,IAAG,GAAI,WAAU,GAAIyC,MAAM,CAAC,CAAC,CAAC,CAACrB,KAAI,GAAI,GAAG;UAC7D;QACF,CAAC;QACDsB,OAAO,EAAE;UACPC,OAAO,EAAE;YACPC,QAAQ,EAAE;cACRd,IAAI,EAAE;YACR,CAAC;YACDe,SAAS,EAAE;cACTf,IAAI,EAAE,IAAI;cACVS,IAAI,EAAE,CAAC,MAAM,EAAE,KAAK;YACtB,CAAC;YACDO,OAAO,EAAE;cACPhB,IAAI,EAAE;YACR,CAAC;YACDiB,WAAW,EAAE;cACXjB,IAAI,EAAE,IAAI;cACV9B,IAAI,EAAEG,IAAI,CAACiB,KAAI,GAAI,QAAQ;cAC3B4B,UAAU,EAAE;YACd;UACF,CAAC;UACDC,SAAS,EAAE;YACTC,MAAM,EAAE;cACNC,WAAW,EAAE;YACf;UACF,CAAC;UACDvB,GAAG,EAAE,CAAC;UACNF,KAAK,EAAE;QACT,CAAC;QACD0B,QAAQ,EAAE,CACR;UACEb,IAAI,EAAE,QAAQ;UACdc,UAAU,EAAE,CAAC;UACbC,QAAQ,EAAE;QACZ,CAAC,CACF;QACDC,KAAK,EAAE;UACLhB,IAAI,EAAE,UAAU;UAChBiB,QAAQ,EAAE;YACRC,SAAS,EAAE;cACTvB,KAAK,EAAE;YACT;UACF,CAAC;UACDwB,SAAS,EAAE;YACT5B,IAAI,EAAE;UACR,CAAC;UACD6B,QAAQ,EAAE;YACR7B,IAAI,EAAE;UACR,CAAC;UACD;UACA8B,SAAS,EAAE;YACT9B,IAAI,EAAE,IAAI;YACVG,SAAS,EAAE;cACTC,KAAK,EAAE,SAAS;cAChBC,QAAQ,EAAE;YACZ,CAAC;YACD0B,MAAM,EAAE;UACV,CAAC;UACD/C,IAAI,EAAEC;QACR,CAAC;QACD+C,KAAK,EAAE,CACL;UACEvB,IAAI,EAAE,OAAO;UACboB,QAAQ,EAAE;YACR7B,IAAI,EAAE;UACR,CAAC;UACD;UACA8B,SAAS,EAAE;YACT3B,SAAS,EAAE;cACTE,QAAQ,EAAE,EAAE;cACZD,KAAK,EAAE;YACT;UACF,CAAC;UACDsB,QAAQ,EAAE;YACRC,SAAS,EAAE;cACTvB,KAAK,EAAE;YACT;UACF,CAAC;UACD;UACAwB,SAAS,EAAE;YACTD,SAAS,EAAE;cACTvB,KAAK,EAAE;YACT;UACF;QACF,CAAC,CACF;QACD6B,MAAM,EAAE,CACN;UACE/D,IAAI,EAAE,MAAM;UACZuC,IAAI,EAAE,KAAK;UACXzB,IAAI,EAAEE,KAAK;UACXgD,QAAQ,EAAE,KAAK;UACfC,SAAS,EAAE;YACT/B,KAAK,EAAE,IAAI1C,OAAO,CAAC0E,OAAO,CAACC,cAAc,CACvC,CAAC,EACD,CAAC,EACD,CAAC,EACD,CAAC,EACD,CACE;cACEC,MAAM,EAAE,CAAC;cACTlC,KAAK,EAAE;YACT,CAAC,EACD;cACEkC,MAAM,EAAE,CAAC;cACTlC,KAAK,EAAE;YACT,CAAC,CACF,EACD,KAAI;UAER;QACF,CAAC;MAEL,CAAC,EACD,IAAG,CACJ;MAED3B,OAAO,CAAC8D,KAAK,EAAE,CAACC,GAAG,CAAC,OAAO,CAAC;MAC5B/D,OAAO,CAAC8D,KAAK,EAAE,CAACE,EAAE,CAAC,OAAO,EAAG9B,MAAM,IAAK;QACtC,MAAM+B,YAAW,GAAI,CAAC/B,MAAM,CAACgC,OAAO,EAAEhC,MAAM,CAACiC,OAAO,CAAC;QACrD,IAAInE,OAAO,CAACoE,YAAY,CAAC,MAAM,EAAEH,YAAY,KAAKzD,KAAK,CAACgB,MAAK,KAAM,CAAC,EAAE;UACpE1B,YAAY,CAAC,OAAO,CAAC;QACvB;MACF,CAAC,CAAC;IACJ,CAAC;IAEDT,KAAK,CACHO,IAAI,EACJ,CAACyE,EAAE,EAAEC,EAAE,KAAK;MACVnE,YAAY,EAAE;IAChB,CAAC,EACD;MAAEoE,IAAI,EAAE;IAAM,EACf;IACDlF,KAAK,CACHQ,UAAU,EACV,CAACwE,EAAE,EAAEC,EAAE,KAAK;MACVnE,YAAY,EAAE;IAChB,CAAC,EACD;MAAEoE,IAAI,EAAE,KAAK;MAAEC,IAAI,EAAE;IAAK,EAC3B;IAED,OAAO;MACLzE;IACF,CAAC;EACH;AACF,CAAC","names":["echarts","onMounted","onBeforeUnmount","ref","watch","debounce","useResize","selectCityData","name","setup","abcode","year","parentInfo","routerChange","cityCount","myChart","resizeHandler","resize","getChartData","window","addEventListener","removeEventListener","data","xData","yData","forEach","item","push","value","initEcharts","init","setOption","grid","left","right","bottom","top","title","show","length","text","textStyle","color","fontSize","tooltip","trigger","axisPointer","type","formatter","params","toolbox","feature","dataView","magicType","restore","saveAsImage","pixelRatio","iconStyle","normal","borderColor","dataZoom","startValue","endValue","xAxis","axisLine","lineStyle","splitLine","axisTick","axisLabel","rotate","yAxis","series","barWidth","itemStyle","graphic","LinearGradient","offset","getZr","off","on","pointInPixel","offsetX","offsetY","containPixel","nl","ol","lazy","deep"],"sourceRoot":"","sources":["E:\\2023spring\\sci\\vue3-bigData\\src\\views\\homepage\\components\\cityCount.vue"],"sourcesContent":["<template>\r\n  <div class=\"chart-wrapper\" ref=\"cityCount\"></div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from \"echarts\";\r\nimport { onMounted, onBeforeUnmount, ref, watch } from \"vue\";\r\nimport { debounce } from \"@/utils/index.js\";\r\n\r\nimport useResize from \"@/componentApi/useResize.js\";\r\nimport { selectCityData } from \"@/api/chart\";\r\n\r\nexport default {\r\n  name: \"cityCount\",\r\n  setup() {\r\n    let { abcode, year, parentInfo, routerChange } = useResize();\r\n\r\n    const cityCount = ref(null);\r\n    let myChart = ref(null);\r\n\r\n    const resizeHandler = debounce(() => {\r\n      if (myChart) {\r\n        myChart.resize();\r\n      }\r\n    }, 200);\r\n\r\n    onMounted(() => {\r\n      getChartData();\r\n      window.addEventListener(\"resize\", resizeHandler);\r\n    });\r\n    onBeforeUnmount(() => {\r\n      window.removeEventListener(\"resize\", resizeHandler);\r\n    });\r\n\r\n    //模拟接口，获取echarts数据\r\n    const getChartData = async () => {\r\n      const { data } = await selectCityData({\r\n        abcode,\r\n        year,\r\n      });\r\n      let xData = [],\r\n        yData = [];\r\n      data.forEach((item) => {\r\n        xData.push(item.name);\r\n        yData.push(item.value);\r\n      });\r\n      initEcharts(xData, yData);\r\n    };\r\n\r\n    //渲染echarts图\r\n    const initEcharts = (xData, yData) => {\r\n      myChart = echarts.init(cityCount.value);\r\n      myChart.setOption(\r\n        {\r\n          grid: {\r\n            left: \"13%\",\r\n            right: \"8%\",\r\n            bottom: \"25%\",\r\n            top: \"10%\",\r\n          },\r\n          title: {\r\n            show: xData.length === 0,\r\n            top: \"center\",\r\n            left: \"center\",\r\n            text: \"暂无数据\",\r\n            textStyle: {\r\n              color: \"rgb(179, 239, 255)\",\r\n              fontSize: 12,\r\n            },\r\n          },\r\n          tooltip: {\r\n            trigger: \"axis\",\r\n            axisPointer: {\r\n              type: \"shadow\",\r\n            },\r\n            formatter: (params) => {\r\n              return params[0].name + \"<br>销售额度：\" + params[0].value + \"万\";\r\n            },\r\n          },\r\n          toolbox: {\r\n            feature: {\r\n              dataView: {\r\n                show: false,\r\n              },\r\n              magicType: {\r\n                show: true,\r\n                type: [\"line\", \"bar\"],\r\n              },\r\n              restore: {\r\n                show: false,\r\n              },\r\n              saveAsImage: {\r\n                show: true,\r\n                name: year.value + \"年销售额排名\",\r\n                pixelRatio: 2,\r\n              },\r\n            },\r\n            iconStyle: {\r\n              normal: {\r\n                borderColor: \"#1990DA\",\r\n              },\r\n            },\r\n            top: 0,\r\n            right: 5,\r\n          },\r\n          dataZoom: [\r\n            {\r\n              type: \"inside\",\r\n              startValue: 0,\r\n              endValue: 10,\r\n            },\r\n          ],\r\n          xAxis: {\r\n            type: \"category\",\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#397cbc\",\r\n              },\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            //轴线上的字\r\n            axisLabel: {\r\n              show: true,\r\n              textStyle: {\r\n                color: \"#cecece\",\r\n                fontSize: 12,\r\n              },\r\n              rotate: 15,\r\n            },\r\n            data: xData,\r\n          },\r\n          yAxis: [\r\n            {\r\n              type: \"value\",\r\n              axisTick: {\r\n                show: false,\r\n              },\r\n              //轴线上的字\r\n              axisLabel: {\r\n                textStyle: {\r\n                  fontSize: 12,\r\n                  color: \"#cecece\",\r\n                },\r\n              },\r\n              axisLine: {\r\n                lineStyle: {\r\n                  color: \"#397cbc\",\r\n                },\r\n              },\r\n              //网格线\r\n              splitLine: {\r\n                lineStyle: {\r\n                  color: \"#11366e\",\r\n                },\r\n              },\r\n            },\r\n          ],\r\n          series: [\r\n            {\r\n              name: \"销售额度\",\r\n              type: \"bar\",\r\n              data: yData,\r\n              barWidth: \"45%\",\r\n              itemStyle: {\r\n                color: new echarts.graphic.LinearGradient(\r\n                  0,\r\n                  0,\r\n                  0,\r\n                  1,\r\n                  [\r\n                    {\r\n                      offset: 0,\r\n                      color: \"#01BDF4\",\r\n                    },\r\n                    {\r\n                      offset: 1,\r\n                      color: \"#083AF6 \",\r\n                    },\r\n                  ],\r\n                  false\r\n                ),\r\n              },\r\n            },\r\n          ],\r\n        },\r\n        true\r\n      );\r\n\r\n      myChart.getZr().off(\"click\");\r\n      myChart.getZr().on(\"click\", (params) => {\r\n        const pointInPixel = [params.offsetX, params.offsetY];\r\n        if (myChart.containPixel(\"grid\", pointInPixel) || xData.length === 0) {\r\n          routerChange(\"/more\");\r\n        }\r\n      });\r\n    };\r\n\r\n    watch(\r\n      year,\r\n      (nl, ol) => {\r\n        getChartData();\r\n      },\r\n      { lazy: false }\r\n    );\r\n    watch(\r\n      parentInfo,\r\n      (nl, ol) => {\r\n        getChartData();\r\n      },\r\n      { lazy: false, deep: true }\r\n    );\r\n\r\n    return {\r\n      cityCount,\r\n    };\r\n  },\r\n};\r\n</script>\r\n"]}]}